#
#  Copyright ETH 2025 Zürich, Scientific IT Services
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
#
#

#############################################################
# JUL Log Levels (must use these exact names) and Log4j mapping
#
# OFF     = no logging                      | Log4j: OFF
# SEVERE  = serious failures, system errors | Log4j: ERROR
# WARNING = potential problems, recoverable | Log4j: WARN
# INFO    = general informational messages   | Log4j: INFO
# CONFIG  = static configuration messages    | Log4j: DEBUG
# FINE    = general debugging/tracing        | Log4j: DEBUG
# FINER   = more detailed tracing            | Log4j: TRACE
# FINEST  = most detailed, very verbose      | Log4j: TRACE
# ALL     = enable all logging               | Log4j: ALL
#############################################################

# Global default level
.global.level = INFO

# List of all handlers
.global.handlerAliases = DEFAULT, STDOUT

############################################################
# DEFAULT File Handler (was ?DEFAULT? DailyRollingFileAppender)
############################################################
DEFAULT.class = ch.systemsx.cisd.common.logging.ext.DailyRollingFileHandler
DEFAULT.logFileName = log/datastore_server.log
DEFAULT.maxLogFileSize = 10485760
DEFAULT.append = true
DEFAULT.level = INFO
DEFAULT.messagePattern = %d %-5p [%t] %c - %m%n

############################################################
# STDOUT Console Handler (was ?STDOUT? ConsoleAppender)
############################################################
STDOUT.class = ch.systemsx.cisd.common.logging.ext.ConsoleHandler
STDOUT.level = INFO
STDOUT.messagePattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n
STDOUT.encoding = UTF-8
STDOUT.target = System.out

#############################################################
## NULL Handler (was ?NULL? NullAppender)
#############################################################
NULL.class = ch.systemsx.cisd.common.logging.ext.NullHandler
NULL.level = ALL


############################################################
# EMAIL Handler (was ?EMAIL? SMTPAppender)
############################################################
#EMAIL.class = ch.systemsx.cisd.common.logging.ext.SMTPAppender
#EMAIL.level = INFO
#EMAIL.smtpHost = localhost
#EMAIL.from = datastore-server-openbis@localhost
#EMAIL.to = openbis@localhost
#EMAIL.subject = ATTENTION: Data Set Server
#EMAIL.bufferSize = 512
#EMAIL.evaluatorClass = ch.systemsx.cisd.common.logging.AlwaysTrueTriggeringEventEvaluator
#EMAIL.layout = org.apache.log4j.PatternLayout
#EMAIL.layout.ConversionPattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n

############################################################
# SERVICE_CALL Handler
############################################################
SERVICE_CALL.class = ch.systemsx.cisd.openbis.common.log.ServiceCallAppender
SERVICE_CALL.logFileName = log/datastore_server_service_calls.log
SERVICE_CALL.level = INFO
SERVICE_CALL.messagePattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %logger{36} - %msg%n

############################################################
# LONG_RUNNING_THREAD Handler
############################################################
LONG_RUNNING_THREAD.class = ch.systemsx.cisd.common.logging.ext.DailyRollingFileHandler
LONG_RUNNING_THREAD.logFileName = log/datastore_server_long_running_threads.log
LONG_RUNNING_THREAD.level = INFO
LONG_RUNNING_THREAD.messagePattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %logger{36} - %msg%n

############################################################
# SQL_ERROR_CODES_FACTORY Handler
############################################################
SQL_ERROR_CODES_FACTORY.class = ch.systemsx.cisd.common.logging.ext.DailyRollingFileHandler
SQL_ERROR_CODES_FACTORY.logFileName = log/datastore_server_sql_error_codes_factory.log
SQL_ERROR_CODES_FACTORY.level = INFO
SQL_ERROR_CODES_FACTORY.messagePattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %logger{36} - %msg%n

############################################################
# DB_CONNECTIONS Handler
############################################################
DB_CONNECTIONS.class = ch.systemsx.cisd.dbmigration.logging.DbConnectionLogAppender
DB_CONNECTIONS.logFileName = log/datastore_server_db_connections.log
DB_CONNECTIONS.level = INFO
DB_CONNECTIONS.messagePattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %logger{36} - %msg%n

############################################################
# Per?logger assignments (mirroring your <category> mapping)
############################################################
# MACHINE.MonitoringPoolingDataSource ? DB_CONNECTIONS
MACHINE.MonitoringPoolingDataSource.level = INFO
MACHINE.MonitoringPoolingDataSource.handlerAliases = DB_CONNECTIONS

# NOTIFY = DEFAULT + EMAIL
NOTIFY.level = INFO
NOTIFY.handlerAliases = DEFAULT

#NOTIFY.handlerAliases = DEFAULT,EMAIL

# TRACKING = SERVICE_CALL
TRACKING.level = INFO
TRACKING.handlerAliases = SERVICE_CALL

# ACCESS = SERVICE_CALL
ACCESS.level = INFO
ACCESS.handlerAliases = SERVICE_CALL

# ACCESS.LongRunningThreadLogger = LONG_RUNNING_THREAD
ACCESS.LongRunningThreadLogger.level = INFO
ACCESS.LongRunningThreadLogger.handlerAliases = LONG_RUNNING_THREAD

# org.springframework.jdbc.support.SQLErrorCodesFactory = SQL_ERROR_CODES_FACTORY
org.springframework.jdbc.support.SQLErrorCodesFactory.level = INFO
org.springframework.jdbc.support.SQLErrorCodesFactory.handlerAliases = SQL_ERROR_CODES_FACTORY


############################################################
# Special BioFormats log filters
############################################################
loci.formats.in.level = WARN
loci.formats.FormatHandler.level = ERROR

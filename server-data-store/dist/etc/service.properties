#
# Any changes on these properties we discourage outside the development team
# These properties allow to swap internal components during development
# They are used by the development team for testing
#
# prefix needed for setting service.properties from system properties or environment variables
system.property.prefix=afs.
logFactoryClass=ch.ethz.sis.shared.log.standard.impl.StandardLogFactory
afs.logging.configuration=./etc/logging.properties
jsonObjectMapperClass=ch.ethz.sis.afsjson.jackson.JacksonObjectMapper
httpServerClass=ch.ethz.sis.afsserver.http.impl.NettyHttpServer
connectionFactoryClass=ch.ethz.sis.afsserver.worker.ConnectionFactory
workerFactoryClass=ch.ethz.sis.afsserver.worker.WorkerFactory
publicApiInterface=ch.ethz.sis.afsapi.api.PublicAPI
maxReadSizeInBytes=10485760
# This is a heuristic, maxReadSizeInBytes * 1.5, is used for safety, to discard packages bigger than this size by the server
httpMaxContentLength=15728640
httpServerUri=/afs-server
httpServerPort=8085

enablePreview=png,jpeg,jpg,gif,bmp,tiff
enablePreviewSizeInBytes=100000000

#
# Any changes on these properties are discouraged if you don't plan to use the AFS without openBIS
# These properties allow to swap internal components during development
# Allow to run the AFS without openBIS
#
lockMapperClass=ch.ethz.sis.openbis.afsserver.worker.providers.impl.OpenBISAuthorizationInfoProvider
# defaults to 24 hours
lockingTimeoutInSeconds=84600
# defaults to 60 seconds
lockingWaitingIntervalInMillis=60000
serverObserver=ch.ethz.sis.openbis.afsserver.server.observer.impl.OpenBISServerObserver
apiServerObserver=ch.ethz.sis.openbis.afsserver.server.observer.impl.OpenBISAPIServerObserver
authenticationInfoProviderClass=ch.ethz.sis.openbis.afsserver.worker.providers.impl.OpenBISAuthenticationInfoProvider
authorizationInfoProviderClass=ch.ethz.sis.openbis.afsserver.worker.providers.impl.OpenBISAuthorizationInfoProvider
# These caches expire an entry after has not been used for x milliseconds
# defaults to 10 seconds
authenticationProxyCacheIdleTimeout=10000
authorizationProxyCacheIdleTimeout=10000
# Maximum amount of time allowed for a request to do a piece of work, when exceeded, the server cancels the request, in milliseconds
# defaults to 1 hour
apiServerWorkerTimeout=3600000

#
# These SHOULD ALWAYS be MANUALLY configured
#

# Where all the transactions information is written until the prepare step
# For performance reasons should be on the save volume as the configured storage
writeAheadLogRoot=$DSS_ROOT_DIR/transactions
storageRoot=$DSS_ROOT_DIR/store
storageUuid=
storageIncomingShareId=1
poolSize=50
apiServerInteractiveSessionKey=
apiServerTransactionManagerKey=

openBISUrl=https://$HOSTNAME:8443
openBISTimeout=30000
openBISUser=afsserver
openBISPassword=
openBISLastSeenDeletionFile=./last-seen-deletion
openBISLastSeenDeletionBatchSize=1000
openBISLastSeenDeletionIntervalInSeconds=900

#
# These are optional
# pathInfoFeedingTask: fills the database to be used as a cache for immutable datasets
#   - Is MANDATORY if archiving is used
# shufflingTask
#   - Is MANDATORY if more than one share id is used

# maintenance-plugins = pathInfoFeedingTask, shufflingTask

# pathInfoFeedingTask.class = ch.systemsx.cisd.etlserver.path.PathInfoDatabaseFeedingTask
# pathInfoFeedingTask.interval = 3600
#
# pathInfoDB.name=pathinfo
# pathInfoDB.kind=prod
# pathInfoDB.engine=postgresql
# pathInfoDB.version-holder-class=ch.systemsx.cisd.openbis.dss.generic.shared.PathInfoDatabaseVersionHolder
# pathInfoDB.script-folder=afs-server/sql/pathinfo
#
# shuffling-task.class = ch.systemsx.cisd.etlserver.plugins.SegmentedStoreShufflingTask
# shuffling-task.interval = 3600
#
# shuffling.class = ch.systemsx.cisd.etlserver.plugins.SimpleShuffling
# shuffling.share-finder.class = ch.systemsx.cisd.openbis.dss.generic.shared.SimpleShareFinder
# shuffling.verify-checksum = true
